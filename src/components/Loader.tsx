import { observer } from "mobx-react-lite";
import { useEffect, useState } from "react";
import store from "./store";

const Loader = observer(() => {
  const [text, setText] = useState("Загрузка...");

  useEffect(() => {
    setText(store.message);
  }, [store.message]);

  return (
    <>
      <div className="w-full h-screen bg-black flex items-center justify-center">
        <div>
          <svg
            width="200"
            height="200"
            viewBox="0 0 200 200"
            xmlns="http://www.w3.org/2000/svg"
            role="img"
            aria-label="Loading"
          >
            <g transform="rotate(0 100 100)">
              <circle cx="100" cy="100" r="100" fill="#363636" />
              <path
                d="M27.0547 81.872H30.2435V62.3203C30.2435 60.2815 30.6617 58.3996 31.4459 56.6744C32.23 54.9493 33.3801 53.4855 34.7392 52.2309C36.0984 50.9762 37.719 50.0352 39.5486 49.3034C41.3783 48.6238 43.2602 48.2578 45.299 48.2578H78.9124C80.8988 48.2578 82.833 48.5715 84.6627 49.2511C86.4924 49.9307 88.1652 50.8717 89.5766 52.074C90.9881 53.2764 92.1904 54.7402 93.0268 56.4653C93.8633 58.1382 94.3337 60.0202 94.3337 62.059V81.7674H99.1431V94.0525H27.0547V81.7674V81.872ZM82.8853 60.1247H41.1692V81.872H82.8853V60.1247Z"
                fill="#26A69A"
              />
              <path
                d="M170.076 94.1539H158.366V59.5465L126.791 90.3377C125.328 91.906 123.759 93.0561 122.139 93.788C120.466 94.5199 118.793 94.8335 117.016 94.8335C115.238 94.8335 113.566 94.4676 112.102 93.788C110.69 93.1084 109.488 92.1674 108.495 91.0173C107.502 89.8672 106.77 88.4557 106.247 86.8874C105.724 85.3191 105.463 83.6462 105.463 81.8688V48.0455H117.277V82.5484L148.8 51.4958C151.884 48.4638 155.125 47 158.471 47C159.987 47 161.398 47.2091 162.81 47.6796C164.221 48.1501 165.423 48.7774 166.521 49.6661C167.619 50.5548 168.455 51.7049 169.135 53.1164C169.762 54.5279 170.128 56.2008 170.128 58.0827V94.1539H170.076Z"
                fill="#26A69A"
              />
              <path
                d="M68.3502 104.768V112.191H83.1965C88.2673 112.191 92.0312 113.08 94.4881 114.805C96.9451 116.583 98.1997 119.04 98.1997 122.229V134.096C98.1997 135.298 97.8861 136.5 97.2065 137.65C96.5792 138.8 95.5859 139.846 94.2268 140.787C92.8676 141.728 91.1948 142.46 89.2083 142.983C87.2218 143.505 84.8171 143.819 82.0988 143.819H68.2979V151.347H55.804V143.819H43.0487C41.3236 143.819 39.5462 143.662 37.6643 143.296C35.7823 142.93 34.0572 142.355 32.489 141.571C30.9207 140.787 29.6138 139.741 28.5683 138.382C27.5228 137.075 27 135.455 27 133.573V121.444C27 120.085 27.3137 118.831 27.8887 117.681C28.4637 116.53 29.3001 115.589 30.3457 114.753C31.3912 113.917 32.6981 113.289 34.2141 112.819C35.7301 112.348 37.4029 112.139 39.2326 112.139H55.804V104.716H68.2979L68.3502 104.768ZM36.9847 121.497V133.939H55.8563V121.497H36.9847ZM68.3502 121.497V133.939H87.7445V121.497H68.3502Z"
                fill="#E7E7E7"
              />
              <path
                d="M104.48 151.659V116.895C104.48 115.326 104.794 113.81 105.369 112.399C105.944 110.987 106.728 109.785 107.773 108.739C108.767 107.694 109.969 106.91 111.328 106.282C112.687 105.655 114.203 105.394 115.772 105.394C117.288 105.394 118.647 105.655 119.954 106.178C121.208 106.7 122.411 107.432 123.456 108.321C124.502 109.21 125.443 110.255 126.227 111.51C127.011 112.712 127.69 114.019 128.213 115.378L138.668 141.151L150.169 113.967C151.11 111.353 152.574 109.262 154.508 107.694C156.442 106.125 158.795 105.394 161.565 105.394C163.343 105.394 164.911 105.759 166.322 106.439C167.734 107.171 168.936 108.112 169.982 109.314C170.975 110.517 171.759 111.876 172.282 113.444C172.805 115.013 173.118 116.581 173.118 118.254V151.607H161.879V117.626L150.796 141.883C149.96 143.713 149.176 145.333 148.496 146.64C147.764 147.999 146.98 149.097 146.144 150.038C145.307 150.979 144.314 151.659 143.164 152.077C142.014 152.495 140.603 152.757 138.878 152.757C137.362 152.757 136.002 152.443 134.8 151.868C133.598 151.241 132.5 150.456 131.454 149.463C130.409 148.47 129.572 147.32 128.736 145.961C127.952 144.654 127.22 143.294 126.593 141.831L115.667 118.045V151.607H104.428L104.48 151.659Z"
                fill="#E7E7E7"
              />

              <animateTransform
                attributeName="transform"
                type="rotate"
                from="0 100 100"
                to="360 100 100"
                dur="5.3s"
                repeatCount="indefinite"
              />
            </g>
          </svg>
          <div className="text-white text-center m-4">{text}</div>
        </div>
      </div>
    </>
  );
});

export default Loader;
